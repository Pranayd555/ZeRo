<mat-progress-spinner
  class="spinner"
  mode="indeterminate"
  *ngIf="!fruits || fruits.length == 0"
></mat-progress-spinner>
<div class="p-2 m-2">
<form *ngIf="fruits && fruits.length > 0" #highlight>
  <b>Highlight:</b>
  <input
    type="checkbox"
    name="name"
    #name="ngModel"
    [(ngModel)]="highlightColor.name"
    [checked]="highlightColor.name"
  />name
  <input
    type="checkbox"
    name="price"
    #price="ngModel"
    [(ngModel)]="highlightColor.price"
    [checked]="highlightColor.price"
  />price
  <input
    type="checkbox"
    name="discount"
    #discount="ngModel"
    [(ngModel)]="highlightColor.discount"
    [checked]="highlightColor.discount"
  />discount
  <input
    type="checkbox"
    name="about"
    #about="ngModel"
    value=""
    [(ngModel)]="highlightColor.about"
    [checked]="highlightColor.about"
  />about
</form>
</div>
<ng-container *ngIf="fruits && fruits.length > 0">
  <div class="container">
  <ng-container
  *ngFor="let fruit of fruits; let i = index; trackBy: isUpdated">
  <div appBetterHighlighter
    class="card" *ngIf="fruit.name"
  >
    <h1 [appHighlight]="highlightColor.name" [zoomScale]="1.2" [color]="highlightColorClass" ele="name">
      {{ fruit.name }}
    </h1>
    <div *ngIf="(!isEdit || isEdit['name'] !== fruit.name)">
      <span 
        [appCurrencyConverter]="currencyConvertRate"
        [amount]="{ price: fruit.price, id: i }"
        [appHighlight]="highlightColor.price"
        [color]="highlightColorClass"
        [zoomScale]="1.2"
        ele="price"
        class="price"
        >${{ fruit.price }}/{{ fruit.quantity }}
        <!-- <i  fa-fa-info-circle id="priceConversion{{i}}"></i> -->
      </span>

      <p [appHighlight]="highlightColor.discount" [zoomScale]="1.2" [color]="highlightColorClass" ele="discount">
        <b>Given discount {{ fruit.discount }}..</b>
      </p>
      <p>
        <b>Some text about the {{ fruit.name }}..</b>
      </p>

      <p [appHighlight]="highlightColor.about" [zoomScale]="1.1" [color]="highlightColorClass" ele="about" class="mb-4 mt-4 pt-6 pb-6">
        {{ fruit.about }}
      </p>
      <p><button type="button" class="btn btn-primary" (click)="enableEdit(fruit.name)">Edit</button> 
        <button type="button" class="btn btn-danger" (click)="deleteFruit(fruit.name, i)">Delete
      </button></p>
      <mat-progress-bar id="progressbar{{i}}" appCustomLoader [isLoading]="isDelete" #progressBar mode="indeterminate"></mat-progress-bar>
    </div>
    <app-add-fruit *ngIf="(isEdit && isEdit['name'] == fruit.name)"
      [addNew]="addNew"
      [(updatedFruit)]="updatedFruit"
      [(isEdit)]="isEdit"
      [(fruits)]="fruits"
      [fruit]="fruit"
    ></app-add-fruit>
  </div>
</ng-container>
  
  <div class="card" *ngIf="addNew">
    <app-add-fruit
      [(addNew)]="addNew"
      [(updatedFruit)]="updatedFruit"
      [(isEdit)]="isEdit"
      [(fruits)]="fruits"
    ></app-add-fruit>
  </div>
  
  </div>
  <div #addFruit class="more-btn mb-4 pb-6 mt-4">
    <button type="button" (click)="addNewFruit()" class="add btn btn-light">Add More</button>
  </div>
</ng-container>
